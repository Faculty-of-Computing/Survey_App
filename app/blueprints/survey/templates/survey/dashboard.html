{% extends 'base.html' %} {% block title %}Dashboard{% endblock %} {% block
content %}
<div class="bg-gray-50 min-h-screen font-sans">
  <div class="container mx-auto p-6">
    <header class="w-full mb-6 border-b-gray-500-2 shadow-sm pb-4 px-4">
      <div
        class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center"
      >
        <div>
          <h1 class="text-xl font-semibold">Survey Platform</h1>
          <p class="text-gray-600">Welcome back, {{ username }}</p>
        </div>
        <form action="{{ url_for('auth.logout')}}" method="POST">
          <button
            type="submit"
            class="flex items-center justify-between space-x-4 px-2 py-2 rounded-md hover:bg-gray-100 transition hover:shadow-sm"
          >
            <img
              src="{{ url_for('static', filename='assets/exit.png') }}"
              alt=""
              class="h-6 w-6"
            />
            <span class="text-gray-700">Logout</span>
          </button>
        </form>
      </div>
    </header>
    <!-- Header -->

    <!-- Stats Cards -->

    <div class="max-w-7xl mx-auto p-6">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <div class="bg-white rounded-lg p-4 shadow">
          <div class="flex items-center justify-between">
            <h2 class="text-gray-500">Total Surveys</h2>
            <img
              src="{{ url_for('static', filename='assets/statistics.jpg') }}"
              alt=""
              class="h-6 w-6"
            />
          </div>

          <p class="text-2xl font-bold">{{ total_surveys }}</p>
        </div>
        <div class="bg-white rounded-lg p-4 shadow">
          <div class="flex items-center justify-between">
            <h2 class="text-gray-500">Total Responses</h2>
            <img
              src="{{ url_for('static', filename='assets/person.png') }}"
              alt=""
              class="h-6 w-6"
            />
          </div>

          <p class="text-2xl font-bold">{{ total_responses }}</p>
        </div>
        <div class="bg-white rounded-lg p-4 shadow">
          <div class="flex items-center justify-between">
            <h2 class="text-gray-500">Published Surveys</h2>
            <img
              src="{{ url_for('static', filename='assets/book.png') }}"
              alt=""
              class="h-6 w-6"
            />
          </div>

          <p class="text-2xl font-bold">{{ published_surveys }}</p>
        </div>
      </div>

      <!-- Tab Navigation -->
      <div class="flex justify-between items-center space-x-8">
        <div class="flex items-center justify-between">
          <div
            class="flex justify-around items-center bg-gray-200 rounded-full py-1 text-sm"
          >
            <button
              onclick="toggleTab('surveys')"
              class="px-10 py-3 rounded-full hover:bg-white hover:shadow hover:border-gray-200 focus:bg-white focus:shadow focus:border-gray-200"
            >
              My Surveys
            </button>
            <button
              onclick="toggleTab('responses')"
              class="px-10 py-3 rounded-full hover:bg-white hover:shadow hover:border-gray-200 focus:bg-white focus:shadow focus:border-gray-200"
            >
              Recent Responses
            </button>
          </div>
        </div>

        <!-- Create Survey Button -->
        <div
          class="flex justify-between space-x-2 items-center bg-black text-white px-4 py-2 rounded-xl cursor-pointer hover:bg-gray-800 transition"
        >
          <span>+</span>
          <a href="{{ url_for('survey.create') }}" class="">Create Survey</a>
        </div>
      </div>

      <!-- Content Area -->
      <div class="flex justify-between items-center w-full my-6">
        {% if surveys %}
        <div id="surveys" class="space-y-4">
          {% for survey in surveys %}
          <div
            class="bg-white p-4 rounded shadow flex justify-between items-center"
          >
            <div>
              <div class="flex items-center space-x-4 justify-between my-2">
                <h3 class="font-bold">{{ survey.title }}</h3>

                {% if survey.publish %}
                <div class="bg-black text-white text-sm p-1 rounded-md">
                  Published
                </div>
                {% endif %}
              </div>
              <p class="text-sm text-gray-500 my-2">{{ survey.description }}</p>
              <p class="text-sm text-gray-500 my-2">
                {{ survey.questions_length }} Question{{ 's' if
                survey.questions_length != 1 }}
              </p>
              <!-- <p class="text-sm text-gray-500">
                Responses: {{ survey.responses|length }}
              </p> -->
              <p class="text-sm text-gray-500 my-2">
                Created by: {{ survey.user.username }} at {{
                survey.created_at.strftime('%Y-%m-%d %H:%M') }}
              </p>
              <p class="text-sm text-gray-500 my-2">
                Last updated: {{ survey.updated_at.strftime('%Y-%m-%d %H:%M') }}
              </p>
            </div>
          </div>
          {% endfor %}
        </div>
        {% else %}
        <p class="my-4 font-sans">You havenâ€™t created any surveys yet.</p>
        {% endif %} {% if not response %}
        <div id="responses" class="hidden">
          <!-- Response content here -->
          <p class="text-gray-600">No recent responses yet.</p>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
